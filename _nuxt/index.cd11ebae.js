import{a as V,s as A,t as U,v as D,q as f,m as k,l as F,b as h,f as e,j as o,x as n,F as w,w as B,h as r,y as d,z as P,X as z,A as y,o as _,B as j,p as q,e as T,Y as $,I as J,E as Q,Z as R}from"./entry.393a8b12.js";import{u as N}from"./shoppingCart.9b44f3d6.js";const W={data(){return{}},setup(){let t=A();return{ElNotificationError:t.$ElNotificationError,ElNotificationSuccess:t.$ElNotificationSuccess,targetUrl:U().public.$target}},methods:{...D(N,["updateShoppingCart","deleteShoppingCart","checkAll"]),handleChange(t,c,g){this.updateShoppingCart({key:c,prop:"check",val:!0}),f(()=>"/apiapi/user/shoppingCart/updateShoppingCart",{method:"post",body:{user_id:this.getUser.user_id,product_id:g,num:t}},"$WCfHRJDfQx").then(a=>{const i=a.data.value;switch(i.code){case"001":this.updateShoppingCart({key:c,prop:"num",val:t}),this.ElNotificationSuccess(i.msg);break;default:this.ElNotificationError(i.msg)}}).catch(a=>Promise.reject(a))},checkChange(t,c){this.updateShoppingCart({key:c,prop:"check",val:t})},deleteItem(t,c,g){f(()=>"/apiapi/user/shoppingCart/deleteShoppingCart",{method:"post",body:{user_id:this.getUser.user_id,product_id:g}},"$8FuFhQJyW8").then(a=>{console.log("data",a.data.value);const i=a.data.value;switch(i.code){case"001":this.deleteShoppingCart(c),this.ElNotificationSuccess(i.msg);break;default:this.ElNotificationError(i.msg)}}).catch(a=>Promise.reject(a))}},computed:{...k(F,["getUser"]),...k(N,["getShoppingCart","getCheckNum","getTotalPrice","getNum","getIsAllCheck"]),isAllCheck:{get(){return this.getIsAllCheck},set(t){this.checkAll(t)}}}},p=t=>(q("data-v-510c3477"),t=t(),T(),t),H={class:"shoppingCart"},L=p(()=>e("div",{class:"cart-header"},[e("div",{class:"cart-header-content"},[e("p",null,[e("i",{class:"el-icon-shopping-cart-full",style:{color:"#ff6700","font-weight":"600"}}),r(" 我的购物车 ")]),e("span",null,"温馨提示：产品是否购买成功，以最终下单为准哦，请尽快结算")])],-1)),O={key:0,class:"content"},X={class:"header"},Y={class:"pro-check"},Z=P('<div class="pro-img" data-v-510c3477></div><div class="pro-name" data-v-510c3477>商品名称</div><div class="pro-price" data-v-510c3477>单价</div><div class="pro-num" data-v-510c3477>数量</div><div class="pro-total" data-v-510c3477>小计</div><div class="pro-action" data-v-510c3477>操作</div>',6),G={class:"pro-check"},K={class:"pro-img"},M=["src"],ee={class:"pro-name"},te={class:"pro-price"},se={class:"pro-num"},oe={class:"pro-total pro-total-in"},ae={class:"pro-action"},ce=p(()=>e("p",null,"确定删除吗？",-1)),le={style:{"text-align":"right",margin:"10px 0 0"}},ne=p(()=>e("div",{style:{height:"20px","background-color":"#f5f5f5"}},null,-1)),ie={class:"cart-bar"},re={class:"cart-bar-left"},de=p(()=>e("span",{class:"sep"},"|",-1)),pe={class:"cart-total"},ue={class:"cart-total-num"},he={class:"cart-total-num"},_e={class:"cart-bar-right"},ge=p(()=>e("span",{class:"total-price-title"},"合计：",-1)),me={class:"total-price"},ve={key:1,class:"cart-empty"},Ce=p(()=>e("div",{class:"empty"},[e("h2",null,"您的购物车还是空的！"),e("p",null,"快去购物吧！")],-1)),fe=[Ce];function ke(t,c,g,a,i,u){const v=z,m=y("router-link"),S=$,b=J,E=y("CircleCloseFilled"),I=Q,x=R;return _(),h("div",H,[L,t.getShoppingCart.length>0?(_(),h("div",O,[e("ul",null,[e("li",X,[e("div",Y,[o(v,{modelValue:u.isAllCheck,"onUpdate:modelValue":c[0]||(c[0]=s=>u.isAllCheck=s)},{default:n(()=>[r("全选")]),_:1},8,["modelValue"])]),Z]),(_(!0),h(w,null,B(t.getShoppingCart,(s,C)=>(_(),h("li",{class:"product-list",key:s.id},[e("div",G,[o(v,{modelValue:s.check,"onUpdate:modelValue":l=>s.check=l,onChange:l=>u.checkChange(l,C)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),e("div",K,[o(m,{to:{path:"/goods/details",query:{productID:s.productID}}},{default:n(()=>[e("img",{src:a.targetUrl+s.productImg},null,8,M)]),_:2},1032,["to"])]),e("div",ee,[o(m,{to:{path:"/goods/details",query:{productID:s.productID}}},{default:n(()=>[r(d(s.productName),1)]),_:2},1032,["to"])]),e("div",te,d(s.price)+"元",1),e("div",se,[o(S,{modelValue:s.num,"onUpdate:modelValue":l=>s.num=l,onChange:l=>u.handleChange(l,C,s.productID),min:1,max:s.maxNum},null,8,["modelValue","onUpdate:modelValue","onChange","max"])]),e("div",oe,d(s.price*s.num)+"元",1),e("div",ae,[o(x,{placement:"right"},{reference:n(()=>[o(I,{size:"20px",class:"delete",style:{"vertical-align":"middle",cursor:"pointer"}},{default:n(()=>[o(E)]),_:1})]),default:n(()=>[ce,e("div",le,[o(b,{type:"primary",size:"small",onClick:l=>u.deleteItem(l,s.id,s.productID)},{default:n(()=>[r("确定")]),_:2},1032,["onClick"])])]),_:2},1024)])]))),128))]),ne,e("div",ie,[e("div",re,[e("span",null,[o(m,{to:"/goods"},{default:n(()=>[r("继续购物")]),_:1})]),de,e("span",pe,[r(" 共 "),e("span",ue,d(t.getNum),1),r(" 件商品，已选择 "),e("span",he,d(t.getCheckNum),1),r(" 件 ")])]),e("div",_e,[e("span",null,[ge,e("span",me,d(t.getTotalPrice)+"元",1)]),o(m,{to:t.getCheckNum>0?"/confirmOrder":""},{default:n(()=>[e("div",{class:j(t.getCheckNum>0?"btn-primary":"btn-primary-disabled")},"去结算",2)]),_:1},8,["to"])])])])):(_(),h("div",ve,fe))])}const Se=V(W,[["render",ke],["__scopeId","data-v-510c3477"]]);export{Se as default};
