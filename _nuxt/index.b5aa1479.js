import{a as P,s as y,t as b,m as x,l as f,v as D,q as d,b as _,f as t,y as c,j as r,x as o,c as C,C as v,D as k,G as S,z as I,A as U,H as w,I as V,o as l,h as a,F as A,w as B,J as j}from"./entry.393a8b12.js";/* empty css                    */import{u as L}from"./shoppingCart.9b44f3d6.js";const q={data(){return{dis:!1,productID:"",productDetails:"",productPicture:""}},setup(){let i=y();return{ElNotificationError:i.$ElNotificationError,ElNotificationSuccess:i.$ElNotificationSuccess,targetUrl:b().public.$target}},computed:{...x(f,["getUser"])},activated(){this.$route.query.productID!=null&&(this.productID=this.$route.query.productID),this.dis=!1},watch:{productID:function(i){this.getDetails(i),this.getDetailsPicture(i)}},methods:{...D(L,["unshiftShoppingCart","addShoppingCartNum"]),...D(f,["setUser","setShowLogin"]),getDetails(i){d(()=>"/apiapi/product/getDetails",{method:"post",body:{productID:i}},"$xKGo8hQtBR").then(e=>{let u=e.data.value;this.productDetails=u.Product[0]}).catch(e=>Promise.reject(e))},getDetailsPicture(i){d(()=>"/apiapi/product/getDetailsPicture",{method:"post",body:{productID:i}},"$7b4m6OPTAs").then(e=>{let u=e.data.value;this.productPicture=u.ProductPicture}).catch(e=>Promise.reject(e))},addShoppingCart(){if(!this.getUser){this.setShowLogin(!0);return}d(()=>"/apiapi/user/shoppingCart/addShoppingCart",{method:"post",body:{user_id:this.getUser.user_id,product_id:this.productID}},"$gcmtXU8gdV").then(i=>{let e=i.data.value;switch(e.code){case"001":this.unshiftShoppingCart(e.shoppingCartData[0]),this.ElNotificationSuccess(e.msg);break;case"002":this.addShoppingCartNum(this.productID),this.ElNotificationSuccess(e.msg);break;case"003":this.dis=!0,this.ElNotificationError(e.msg);break;default:this.ElNotificationError(e.msg)}}).catch(i=>Promise.reject(i))},addCollect(){if(!this.getUser){this.setShowLogin(!0);return}d(()=>"/apiapi/user/collect/addCollect",{method:"post",body:{user_id:this.getUser.user_id,product_id:this.productID}},"$tVDMQAcdmg").then(i=>{let e=i.data.value;e.code=="001"?this.ElNotificationSuccess(e.msg):this.ElNotificationError(e.msg)}).catch(i=>Promise.reject(i))}}},F={id:"details"},G={class:"page-header"},Q={class:"title"},R={class:"list"},T={class:"main"},z={class:"block"},H=["src","alt"],J={key:1},K=["src","alt"],M={class:"content"},O={class:"name"},X={class:"intro"},W=t("p",{class:"store"},"小米自营",-1),Y={class:"price"},Z={class:"pro-list"},$={class:"pro-name"},tt={class:"pro-price"},et={class:"price-sum"},st={class:"button"},it=I('<div class="pro-policy"><ul><li><i class="el-icon-circle-check"></i> 小米自营 </li><li><i class="el-icon-circle-check"></i> 小米发货 </li><li><i class="el-icon-circle-check"></i> 7天无理由退货 </li><li><i class="el-icon-circle-check"></i> 7天价格保护 </li></ul></div>',1);function ct(i,e,u,h,s,g){const n=U("router-link"),E=j,N=w,m=V;return l(),_("div",F,[t("div",G,[t("div",Q,[t("p",null,c(s.productDetails.product_name),1),t("div",R,[t("ul",null,[t("li",null,[r(n,{to:""},{default:o(()=>[a("概述")]),_:1})]),t("li",null,[r(n,{to:""},{default:o(()=>[a("参数")]),_:1})]),t("li",null,[r(n,{to:""},{default:o(()=>[a("用户评价")]),_:1})])])])])]),t("div",T,[t("div",z,[s.productPicture.length>1?(l(),C(N,{key:0,height:"560px"},{default:o(()=>[(l(!0),_(A,null,B(s.productPicture,p=>(l(),C(E,{key:p.id},{default:o(()=>[t("img",{style:{height:"560px"},src:h.targetUrl+p.product_picture,alt:p.intro},null,8,H)]),_:2},1024))),128))]),_:1})):v("",!0),s.productPicture.length==1?(l(),_("div",J,[t("img",{style:{height:"560px"},src:h.targetUrl+s.productPicture[0].product_picture,alt:s.productPicture[0].intro},null,8,K)])):v("",!0)]),t("div",M,[t("h1",O,c(s.productDetails.product_name),1),t("p",X,c(s.productDetails.product_intro),1),W,t("div",Y,[t("span",null,c(s.productDetails.product_selling_price)+"元",1),k(t("span",{class:"del"},c(s.productDetails.product_price)+"元",513),[[S,s.productDetails.product_price!=s.productDetails.product_selling_price]])]),t("div",Z,[t("span",$,c(s.productDetails.product_name),1),t("span",tt,[t("span",null,c(s.productDetails.product_selling_price)+"元",1),k(t("span",{class:"pro-del"},c(s.productDetails.product_price)+"元",513),[[S,s.productDetails.product_price!=s.productDetails.product_selling_price]])]),t("div",et,"总计 : "+c(s.productDetails.product_selling_price)+"元",1)]),t("div",st,[r(m,{class:"shop-cart",disabled:s.dis,onClick:g.addShoppingCart},{default:o(()=>[a("加入购物车")]),_:1},8,["disabled","onClick"]),r(m,{class:"like",onClick:g.addCollect},{default:o(()=>[a("喜欢")]),_:1},8,["onClick"])]),it])])])}const at=P(q,[["render",ct]]);export{at as default};
