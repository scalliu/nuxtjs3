import{s as f,K as b,L as N,M as C,N as S,O as $,P as k,Q as B,a as T,b as m,f as u,j as p,x as i,c as g,t as x,q as _,R as q,S as V,r as w,T as z,o as c,h as y,y as E,C as L,F as j,w as A,p as O,e as R,U as M,V as F}from"./entry.393a8b12.js";const v="__nuxt_component";async function G(t,e){const a=f(),r=C(),n=S(),{fetchKey:d}=n.proxy.$options,o=typeof d=="function"?d(()=>""):d||r.fullPath,{data:s}=await $(`options:asyncdata:${o}`,()=>b(a,e,[a]));s.value&&typeof s.value=="object"&&Object.assign(await t,k(B(s.value)))}const K=function(e){const{setup:a}=e;return!a&&!e.asyncData&&!e.head?{[v]:!0,...e}:{[v]:!0,...e,setup(r,n){const d=f(),o=a?Promise.resolve(b(d,a,[r,n])).then(l=>l||{}):{},s=[];if(e.asyncData&&s.push(G(o,e.asyncData)),e.head){const l=f();N(typeof e.head=="function"?()=>e.head(l):e.head)}return Promise.resolve(o).then(()=>Promise.all(s)).then(()=>o).finally(()=>{s.length=0})}}};const U=K({data(){return{categoryList:"",categoryID:[],product:"",productList:"",total:0,pageSize:15,currentPage:1,activeName:"-1",search:""}},created(){},mounted(){this.getCategory()},activated(){if(this.activeName="-1",this.total=0,this.currentPage=1,Object.keys(this.$route.query).length==0){this.categoryID=[],this.activeName="0";return}if(this.$route.query.categoryID!=null){this.categoryID=this.$route.query.categoryID,this.categoryID.length==1&&(this.activeName=""+this.categoryID[0]);return}this.$route.query.search!=null&&(this.search=this.$route.query.search)},watch:{activeName:function(t){t==0&&(this.categoryID=[]),t>0&&(this.categoryID=[Number(t)]),this.total=0,this.currentPage=1,this.$router.push({path:"/goods",query:{categoryID:this.categoryID}})},search:function(t){t!=""&&this.getProductBySearch(t)},categoryID:function(){this.getData(),this.search=""},$route:function(t){t.path=="/goods"&&t.query.search!=null&&(this.activeName="-1",this.currentPage=1,this.total=0,this.search=t.query.search)}},methods:{backtop(){const t=setInterval(function(){const e=document.documentElement.scrollTop||document.body.scrollTop,a=Math.floor(-e/5);document.documentElement.scrollTop=document.body.scrollTop=e+a,e===0&&clearInterval(t)},20)},currentChange(t){this.currentPage=t,this.search!=""?this.getProductBySearch():this.getData(),this.backtop()},async getCategory(){x().apiSecret,_(()=>"/apiapiproduct/getCategory",{method:"post",body:{key:Math.random()*1e4+""},watch:!1},"$TnteaYTvWd").then((t,e)=>{var n;const a={category_id:0,category_name:"全部"},r=((n=t.data.value)==null?void 0:n.category)||[];r.unshift(a),this.categoryList=r}).catch(t=>Promise.reject(t))},getData(){const t=this.categoryID.length==0?"/apiapiproduct/getAllProduct":"/apiapiproduct/getProductByCategory";_(()=>t,{method:"post",body:{categoryID:this.categoryID,currentPage:this.currentPage,pageSize:this.pageSize}},"$IyyyiyVXgh").then(e=>{this.product=e.data.value.Product,this.total=e.data.value.total}).catch(e=>Promise.reject(e))},getProductBySearch(){_(()=>"/apiapiproduct/getProductBySearch",{method:"post",body:{search:this.search,currentPage:this.currentPage,pageSize:this.pageSize}},"$8gCGg48NRl").then(t=>{this.product=t.data.value.Product,this.total=t.data.value.total}).catch(t=>Promise.reject(t))}}}),W=t=>(O("data-v-1c5aa486"),t=t(),R(),t),H={class:"goods",id:"goods",name:"goods"},Q={class:"breadcrumb"},X={class:"nav"},Y={class:"product-nav"},J=W(()=>u("div",{class:"title"},"分类",-1)),Z={class:"main"},tt={class:"list"},et={key:1,class:"none-product"},at={class:"pagination"};function ot(t,e,a,r,n,d){const o=M,s=q,l=F,P=V,I=w,D=z;return c(),m("div",H,[u("div",Q,[p(s,{"separator-class":"el-icon-arrow-right"},{default:i(()=>[p(o,{to:"/"},{default:i(()=>[y("首页")]),_:1}),p(o,null,{default:i(()=>[y("全部商品")]),_:1}),t.search?(c(),g(o,{key:0},{default:i(()=>[y("搜索")]),_:1})):(c(),g(o,{key:1},{default:i(()=>[y("分类")]),_:1})),t.search?(c(),g(o,{key:2},{default:i(()=>[y(E(t.search),1)]),_:1})):L("",!0)]),_:1})]),u("div",X,[u("div",Y,[J,p(P,{modelValue:t.activeName,"onUpdate:modelValue":e[0]||(e[0]=h=>t.activeName=h),type:"card"},{default:i(()=>[(c(!0),m(j,null,A(t.categoryList,h=>(c(),g(l,{key:h.category_id,label:h.category_name,name:""+h.category_id},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])])]),u("div",Z,[u("div",tt,[t.product.length>0?(c(),g(I,{key:0,list:t.product},null,8,["list"])):(c(),m("div",et,"抱歉没有找到相关的商品，请看看其他的商品"))]),u("div",at,[p(D,{background:"",layout:"prev, pager, next","page-size":t.pageSize,total:t.total,onCurrentChange:t.currentChange},null,8,["page-size","total","onCurrentChange"])])])])}const ct=T(U,[["render",ot],["__scopeId","data-v-1c5aa486"]]);export{ct as default};
