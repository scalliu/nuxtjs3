import{a as N,m as S,l as k,s as w,b as r,F as v,w as m,o as c,f as t,y as a,j as g,x as y,h as n,p as E,e as b,z as I,A as P}from"./entry.393a8b12.js";const C={data(){return{orders:[],total:[]}},computed:{...S(k,["getUser"])},setup(){let e=w();return{ElNotificationError:e.$ElNotificationError,ElNotificationSuccess:e.$ElNotificationSuccess}},async activated(){console.log("resres获取订单数据-自定义"),await $fetch("/apiapi/user/order/getOrder",{method:"POST",headers:{"Content-Type":"text/plain;charset=UTF-8"},body:{user_id:this.getUser.user_id},referrer:"about:client",referrerPolicy:"no-referrer-when-downgrade",mode:"cors",credentials:"include",cache:"default",redirect:"follow",integrity:"",keepalive:!1,signal:void 0}).then(e=>{console.log("resres",e),(e==null?void 0:e.code)==="001"&&(this.orders=e.orders)}).catch(e=>(console.log("eee",e),Promise.reject(e)))},watch:{orders:function(e){let p=[];for(let l=0;l<e.length;l++){const u=e[l];let s=0,h=0;for(let i=0;i<u.length;i++){const d=u[i];s+=d.product_num,h+=d.product_price*d.product_num}p.push({totalNum:s,totalPrice:h})}this.total=p}}},_=e=>(E("data-v-475f9c2c"),e=e(),b(),e),T={class:"order"},V=_(()=>t("div",{class:"order-header"},[t("div",{class:"order-header-content"},[t("p",null,[t("i",{class:"el-icon-s-order",style:{"font-size":"30px",color:"#ff6700"}}),n(" 我的订单 ")])])],-1)),$={key:0,class:"order-content"},j={class:"order-info"},A={class:"order-id"},B=I('<li class="header" data-v-475f9c2c><div class="pro-img" data-v-475f9c2c></div><div class="pro-name" data-v-475f9c2c>商品名称</div><div class="pro-price" data-v-475f9c2c>单价</div><div class="pro-num" data-v-475f9c2c>数量</div><div class="pro-total" data-v-475f9c2c>小计</div></li>',1),D={class:"pro-img"},F=["src"],U={class:"pro-name"},q={class:"pro-price"},z={class:"pro-num"},O={class:"pro-total pro-total-in"},L={class:"order-bar"},G={class:"order-bar-left"},H={class:"order-total"},J={class:"order-total-num"},K={class:"order-bar-right"},M=_(()=>t("span",{class:"total-price-title"},"合计：",-1)),Q={class:"total-price"},R=_(()=>t("div",{style:{"margin-top":"-40px"}},null,-1)),W={key:1,class:"order-empty"},X=_(()=>t("div",{class:"empty"},[t("h2",null,"您的订单还是空的！"),t("p",null,"快去购物吧！")],-1)),Y=[X];function Z(e,p,l,u,s,h){const i=P("router-link");return c(),r("div",T,[V,s.orders.length>0?(c(),r("div",$,[(c(!0),r(v,null,m(s.orders,(d,f)=>(c(),r("div",{class:"content",key:f},[t("ul",null,[t("li",j,[t("div",A,"订单编号: "+a(d[0].order_id),1)]),B,(c(!0),r(v,null,m(d,(o,x)=>(c(),r("li",{class:"product-list",key:x},[t("div",D,[g(i,{to:{path:"/goods/details",query:{productID:o.product_id}}},{default:y(()=>[t("img",{src:e.$target+o.product_picture},null,8,F)]),_:2},1032,["to"])]),t("div",U,[g(i,{to:{path:"/goods/details",query:{productID:o.product_id}}},{default:y(()=>[n(a(o.product_name),1)]),_:2},1032,["to"])]),t("div",q,a(o.product_price)+"元",1),t("div",z,a(o.product_num),1),t("div",O,a(o.product_price*o.product_num)+"元",1)]))),128))]),t("div",L,[t("div",G,[t("span",H,[n(" 共 "),t("span",J,a(s.total[f].totalNum),1),n(" 件商品 ")])]),t("div",K,[t("span",null,[M,t("span",Q,a(s.total[f].totalPrice)+"元",1)])])])]))),128)),R])):(c(),r("div",W,Y))])}const et=N(C,[["render",Z],["__scopeId","data-v-475f9c2c"]]);export{et as default};
